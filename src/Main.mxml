<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
			   creationComplete="onCreationComplete();">
	<fx:Script>
		<![CDATA[
			import com.thedevstop.asfac.FluentAsFactory;
			import com.thedevstop.asfac.FluentAsFactoryLocator;
			import com.thedevstop.asmap.CaseInsensitiveMapper;
			import com.thedevstop.asmap.IMapper;
			import com.thedevstop.asmap.IObjectMapper;
			import com.thedevstop.asmap.Mapper;
			import com.thedevstop.asmap.ReflectionUtil;
			import com.thedevstop.asmap.TypeInfo;
			import com.thedevstop.User;
			
			private function onCreationComplete():void
			{
				var factory:FluentAsFactory = FluentAsFactoryLocator.factory;
				factory.register(Mapper).asType(IMapper);
				factory.register(CaseInsensitiveMapper).asType(IObjectMapper);
				
				var userObject:Object = {Name:"Anakin Skywalker", Children:[{name:"Luke Skywalker"}, {name:"Leia Amidala Skywalker"}]};
				
				var mapper:IMapper = factory.resolve(IMapper);
				var user:User = mapper.map(userObject, User);
			}
		]]>
	</fx:Script>
	
</s:Application>